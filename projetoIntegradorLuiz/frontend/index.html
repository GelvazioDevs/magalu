<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ecommerce</title>
</head>
<body>
    
    <!-- Botão para abrir o modal -->
    <button id="openModalBtn">Cadastrar Usuário</button>
    <button id="consultarUsuariosBtn">Consultar Usuários</button>

    <!-- Lista de Usuários -->
    <div id="usuariosContainer">
        <h2>Usuários Cadastrados</h2>
        <table border="1" cellpadding="8" cellspacing="0" style="width:100%; max-width:600px;">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Nome</th>
                    <th>Email</th>
                </tr>
            </thead>
            <tbody id="usuariosTableBody">
                <!-- Usuários serão inseridos aqui via JavaScript -->
            </tbody>
        </table>
    </div>
    <script>
        const baseUrl = 'http://localhost:8080/api/v1'; // Altere para o endereço da sua API

        async function consultarUsuarios() {
            try {
                const response = await fetch(`${baseUrl}/usuarios`);
                if (!response.ok) throw new Error('Erro ao buscar usuários');
                return await response.json();
            } catch (error) {
                console.error(error);
                return [];
            }
        }

        async function renderizarUsuarios() {
            const usuarios = await consultarUsuarios();
            const tbody = document.getElementById('usuariosTableBody');
            tbody.innerHTML = '';
            usuarios.forEach(usuario => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${usuario.id}</td>
                    <td>${usuario.nome}</td>
                    <td>${usuario.email}</td>
                `;
                tbody.appendChild(tr);
            });
        }

        document.getElementById('consultarUsuariosBtn').addEventListener('click', renderizarUsuarios);
    </script>
    <!-- Modal -->
    <div id="userModal" style="display:none; position:fixed; z-index:1000; left:0; top:0; width:100vw; height:100vh; background:rgba(0,0,0,0.5);">
        <div style="background:#fff; margin:5% auto; padding:20px; border-radius:8px; width:90%; max-width:400px; position:relative;">
            <span id="closeModalBtn" style="position:absolute; top:10px; right:15px; cursor:pointer; font-size:20px;">&times;</span>
            <h1>Cadastro de Usuários</h1>
            <form id="cadastroUsuarioForm">
                    <label for="id">ID:</label>
                    <input type="number" id="id" name="id" value="7" required><br><br>

                    <label for="nome">Nome:</label>
                    <input type="text" id="nome" name="nome" value="senac" required><br><br>

                    <label for="email">Email:</label>
                    <input type="email" id="email" name="email" value="senac178@email.com" required><br><br>

                    <label for="senha">Senha:</label>
                    <input type="password" id="senha" name="senha" value="Senac.2025" required><br><br>

                    <button type="submit">Cadastrar</button>
            </form>
        </div>
    </div>

    <script>
        const openModalBtn = document.getElementById('openModalBtn');
        const userModal = document.getElementById('userModal');
        const closeModalBtn = document.getElementById('closeModalBtn');

        openModalBtn.onclick = () => userModal.style.display = 'block';
        closeModalBtn.onclick = () => userModal.style.display = 'none';
        window.onclick = (event) => {
            if (event.target === userModal) userModal.style.display = 'none';
        };
    </script>
</body>
</html>